{"ast":null,"code":"// src/store/slices/productsSlice.js\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../utils/axios';\nexport const addProduct = createAsyncThunk('products/addProduct', async (productData, {\n  rejectWithValue\n}) => {\n  try {\n    let config = {};\n\n    // Перевіряємо, чи дані приходять як FormData\n    if (productData instanceof FormData) {\n      config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n    } else {\n      config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n    }\n    console.log('Sending product data:', productData instanceof FormData ? Object.fromEntries(productData) : productData);\n    const {\n      data\n    } = await api.post('/products', productData, config);\n    return data;\n  } catch (error) {\n    var _error$response, _error$response2, _error$response2$data;\n    console.error('Error adding product:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Failed to add product');\n  }\n});\nexport const getProducts = createAsyncThunk('products/getProducts', async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await api.get('/products');\n    return data;\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    return rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Failed to fetch products');\n  }\n});\n\n// Початковий стан\nconst initialState = {\n  items: [],\n  isLoading: false,\n  error: null\n};\n\n// Слайс\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState: {\n    items: [],\n    isLoading: false,\n    error: null\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder\n    // Get Products\n    .addCase(getProducts.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(getProducts.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.items = action.payload;\n    }).addCase(getProducts.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    })\n    // Add Product\n    .addCase(addProduct.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(addProduct.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.items.push(action.payload);\n    }).addCase(addProduct.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  clearError\n} = productsSlice.actions;\nexport default productsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","addProduct","productData","rejectWithValue","config","FormData","headers","console","log","Object","fromEntries","data","post","error","_error$response","_error$response2","_error$response2$data","response","message","getProducts","_","get","_error$response3","_error$response3$data","initialState","items","isLoading","productsSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","push","clearError","actions","reducer"],"sources":["/Users/serhii_bondariev/Documents/GitHub/PowerTools/frontend/src/store/slices/productsSlice.js"],"sourcesContent":["// src/store/slices/productsSlice.js\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../utils/axios';\n\nexport const addProduct = createAsyncThunk(\n  'products/addProduct',\n  async (productData, { rejectWithValue }) => {\n    try {\n      let config = {};\n\n      // Перевіряємо, чи дані приходять як FormData\n      if (productData instanceof FormData) {\n        config = {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        };\n      } else {\n        config = {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        };\n      }\n\n      console.log(\n        'Sending product data:',\n        productData instanceof FormData ? Object.fromEntries(productData) : productData\n      );\n\n      const { data } = await api.post('/products', productData, config);\n      return data;\n    } catch (error) {\n      console.error('Error adding product:', error.response?.data);\n      return rejectWithValue(error.response?.data?.message || 'Failed to add product');\n    }\n  }\n);\n\nexport const getProducts = createAsyncThunk(\n  'products/getProducts',\n  async (_, { rejectWithValue }) => {\n    try {\n      const { data } = await api.get('/products');\n      return data;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.message || 'Failed to fetch products');\n    }\n  }\n);\n\n// Початковий стан\nconst initialState = {\n  items: [],\n  isLoading: false,\n  error: null,\n};\n\n// Слайс\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState: {\n    items: [],\n    isLoading: false,\n    error: null,\n  },\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      // Get Products\n      .addCase(getProducts.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(getProducts.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.items = action.payload;\n      })\n      .addCase(getProducts.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      })\n      // Add Product\n      .addCase(addProduct.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(addProduct.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.items.push(action.payload);\n      })\n      .addCase(addProduct.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { clearError } = productsSlice.actions;\nexport default productsSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}