{"ast":null,"code":"// src/store/slices/productsSlice.js\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../utils/axios';\nexport const addProduct = createAsyncThunk('products/addProduct', async (productData, {\n  rejectWithValue\n}) => {\n  try {\n    let config = {};\n\n    // Перевіряємо, чи дані приходять як FormData\n    if (productData instanceof FormData) {\n      config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n    } else {\n      config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n    }\n    console.log('Sending product data:', productData instanceof FormData ? Object.fromEntries(productData) : productData);\n    const {\n      data\n    } = await api.post('/products', productData, config);\n    return data;\n  } catch (error) {\n    var _error$response, _error$response2, _error$response2$data;\n    console.error('Error adding product:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Failed to add product');\n  }\n});\n\n// Початковий стан\nconst initialState = {\n  items: [],\n  isLoading: false,\n  error: null\n};\n\n// Слайс\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState,\n  reducers: {\n    clearError: state => {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Add Product\n    .addCase(addProduct.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(addProduct.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.items.push(action.payload);\n    }).addCase(addProduct.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    })\n    // Get Products\n    .addCase(getProducts.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(getProducts.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.items = action.payload;\n    }).addCase(getProducts.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  clearError\n} = productsSlice.actions;\nexport default productsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","addProduct","productData","rejectWithValue","config","FormData","headers","console","log","Object","fromEntries","data","post","error","_error$response","_error$response2","_error$response2$data","response","message","initialState","items","isLoading","productsSlice","name","reducers","clearError","state","extraReducers","builder","addCase","pending","fulfilled","action","push","payload","rejected","getProducts","actions","reducer"],"sources":["/Users/serhii_bondariev/Documents/GitHub/PowerTools/frontend/src/store/slices/productsSlice.js"],"sourcesContent":["// src/store/slices/productsSlice.js\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../utils/axios';\n\nexport const addProduct = createAsyncThunk(\n  'products/addProduct',\n  async (productData, { rejectWithValue }) => {\n    try {\n      let config = {};\n\n      // Перевіряємо, чи дані приходять як FormData\n      if (productData instanceof FormData) {\n        config = {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        };\n      } else {\n        config = {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        };\n      }\n\n      console.log(\n        'Sending product data:',\n        productData instanceof FormData ? Object.fromEntries(productData) : productData\n      );\n\n      const { data } = await api.post('/products', productData, config);\n      return data;\n    } catch (error) {\n      console.error('Error adding product:', error.response?.data);\n      return rejectWithValue(error.response?.data?.message || 'Failed to add product');\n    }\n  }\n);\n\n// Початковий стан\nconst initialState = {\n  items: [],\n  isLoading: false,\n  error: null,\n};\n\n// Слайс\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState,\n  reducers: {\n    clearError: (state) => {\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Add Product\n      .addCase(addProduct.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(addProduct.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.items.push(action.payload);\n      })\n      .addCase(addProduct.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      })\n      // Get Products\n      .addCase(getProducts.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(getProducts.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.items = action.payload;\n      })\n      .addCase(getProducts.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { clearError } = productsSlice.actions;\nexport default productsSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}